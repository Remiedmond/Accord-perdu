<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Accord perdu</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/game.css" />
    <link rel="stylesheet" href="css/systems.css" />
    <link rel="stylesheet" href="css/ruelle.css" />
    <link rel="stylesheet" href="css/post-it.css" />
    <link rel="stylesheet" href="css/interference.css" />
    <link rel="stylesheet" href="css/mixage.css" />
    <link rel="stylesheet" href="css/studio.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
  </head>
  <body>
    <div id="modal-overlay" class="hidden" onclick="Game.closeModal()">
      <div class="modal-content" onclick="event.stopPropagation()">
        <button class="close-btn" onclick="Game.closeModal()">X</button>

        <img id="modal-img" src="" alt="info" />

        <p id="modal-desc"></p>
      </div>
    </div>

    <div id="ui-layer">
      <div id="timer">23:55</div>
      <div id="inventory"></div>
    </div>

    <section id="scene-accueil" class="scene active">
      <div class="video-container">
        <video
          id="intro-video"
          src="assets/video/accueil.mp4"
          autoplay
          muted
          playsinline
          onclick="Game.startGame()"
          onended="Game.startGame()"
        ></video>
      </div>
    </section>

    <section id="scene-ruelle" class="scene hidden">
      <img src="assets/img/bg_ruelle.png" class="bg-img" alt="Ruelle" />

      <!-- Flyer -->
      <div id="item-flyer" class="zone-interactive"></div>

      <!-- Gants -->
      <div id="gants-item" class="gants-draggable zone-interactive">
        <img src="assets/img/gants.png" alt="Gants" />
      </div>

      <!-- Poubelle milieu - GARDE le style inline -->
      <div
        id="poubelle-milieu"
        class="poubelle dropzone"
        style="left: 37%; bottom: 45%; width: 80px; height: 150px"
      ></div>

      <!-- Poubelle droite - GARDE le style inline -->
      <div
        id="poubelle-droite"
        class="poubelle dropzone"
        style="right: 2%; bottom: 55%; width: 130px; height: 80px"
      ></div>

      <!-- GouttiÃ¨re secrÃ¨te -->
      <div id="goutiere-secret" class="zone-interactive"></div>

      <!-- Ã  enlever quand DÃ©cor fait -->
      <!-- Tag mur -->
      <div id="tag-mur" class="zone-interactive"></div>

      <!-- Porte -->
      <div
        id="door-zone"
        class="zone-interactive"
        onclick="Puzzles.openDigicode()"
      ></div>
    </section>

    <div id="overlay-digicode" class="overlay hidden">
      <div class="digicode-container">
        <div id="digicode-screen">_ _ _ _</div>
        <div class="keypad">
          <button onclick="Puzzles.typeCode(1)">1</button>
          <button onclick="Puzzles.typeCode(2)">2</button>
          <button onclick="Puzzles.typeCode(3)">3</button>

          <button onclick="Puzzles.typeCode(4)">4</button>
          <button onclick="Puzzles.typeCode(5)">5</button>
          <button onclick="Puzzles.typeCode(6)">6</button>

          <button onclick="Puzzles.typeCode(7)">7</button>
          <button onclick="Puzzles.typeCode(8)">8</button>
          <button onclick="Puzzles.typeCode(9)">9</button>

          <button class="btn-reset" onclick="Puzzles.resetCode()">C</button>
          <button onclick="Puzzles.typeCode(0)">0</button>
          <button class="btn-ok" onclick="Puzzles.validateCode()">OK</button>
        </div>
        <button class="close-btn" onclick="Puzzles.closeDigicode()">X</button>
      </div>
    </div>

    <div id="blackout-overlay"></div>

    <section id="scene-studio" class="scene hidden">
      <img src="assets/img/bg_studio.png" class="bg-img" alt="Studio" />

      <div id="studio-darkness"></div>

      <div id="fuse-box" class="dropzone-fuse">
        <div id="slot-1" class="slot-light" onclick="Logic.removeFuse(1)"></div>
        <div id="slot-2" class="slot-light" onclick="Logic.removeFuse(2)"></div>
        <div id="slot-3" class="slot-light" onclick="Logic.removeFuse(3)"></div>
      </div>

      <div id="fuse-1" class="draggable-fuse">âš¡</div>
      <div id="fuse-2" class="draggable-fuse">âš¡</div>
      <div id="fuse-3" class="draggable-fuse">âš¡</div>

      <div id="boot-overlay" class="hidden">
        <img src="assets/img/screen_boot.png" alt="Booting System..." />
        <div class="loading-bar"></div>
      </div>

      <div id="note-mi-collectible" style="right: 15%; top: 40%; display: none">
        â™ª MI
      </div>

      <!--<div id="tracks-rack">
        <div id="drag-drums" class="draggable-item track-drums">Batterie</div>
        <div id="drag-bass" class="draggable-item track-bass">Basse</div>
        <div id="drag-melody" class="draggable-item track-melody">MÃ©lodie</div>
      </div> !-->

      <div id="locked-overlay" class="hidden">
        <div class="screen-container">
          <img
            src="assets/img/screen_locked.png"
            alt="Locked Screen"
            v-if="sreencache"
          />

          <input
            type="text"
            id="pc-password"
            autocomplete="off"
            placeholder="..."
          />

          <button id="btn-unlock" onclick="Logic.checkPassword()">OK</button>

          <button class="close-btn-modal" onclick="Logic.closeLockedScreen()">
            X
          </button>
        </div>
      </div>

      <div id="pc-main-overlay" class="hidden">
        <div class="screen-container">
          <img src="assets/img/eÌcran pc.png" alt="Bureau Principal" />
          <div
            id="icon-phase-puzzle"
            onclick="PhasePuzzle.init()"
            style="z-index: 2000; position: absolute; cursor: pointer"
          >
            <span style="font-size: 40px">ðŸ“‰</span>
            <span class="icon-label">Signal.exe</span>
          </div>

          <button class="close-btn-screen" onclick="Logic.closeDesktop()">
            X
          </button>
        </div>
      </div>

      <div
        id="daw-screen"
        class="hitbox"
        onclick="Logic.openLockedScreen()"
      ></div>

      <div
        id="postit-trigger"
        class="postit-room"
        onclick="Logic.openPostIt('overlay-postit-1')"
      ></div>
      <div
        id="postit-trigger2"
        class="postit-room"
        onclick="Logic.openPostIt('overlay-postit-2')"
      ></div>
      <div
        id="postit-trigger3"
        class="postit-room"
        onclick="Logic.openPostIt('overlay-postit-3')"
      ></div>
      <div
        id="postit-trigger4"
        class="postit-room"
        onclick="Logic.openPostIt('overlay-postit-4')"
      ></div>

      <div id="overlay-postit-1" class="overlay hidden">
        <div class="postit-modal-content">
          <button
            class="close-btn"
            onclick="Logic.closePostIt('overlay-postit-1')"
          >
            X
          </button>
          <img
            src="assets/img/post it drop.png"
            class="zoom-img"
            v-if="sreencache"
          />
        </div>
      </div>
      <div id="overlay-postit-2" class="overlay hidden">
        <div class="postit-modal-content">
          <button
            class="close-btn"
            onclick="Logic.closePostIt('overlay-postit-2')"
          >
            X
          </button>
          <img
            src="assets/img/post it refrain.png"
            class="zoom-img"
            v-if="sreencache"
          />
        </div>
      </div>
      <div id="overlay-postit-3" class="overlay hidden">
        <div class="postit-modal-content">
          <button
            class="close-btn"
            onclick="Logic.closePostIt('overlay-postit-3')"
          >
            X
          </button>
          <img
            src="assets/img/post it intro.png"
            class="zoom-img"
            v-if="sreencache"
          />
        </div>
      </div>
      <div id="overlay-postit-4" class="overlay hidden">
        <div class="postit-modal-content">
          <button
            class="close-btn"
            onclick="Logic.closePostIt('overlay-postit-4')"
          >
            X
          </button>
          <img
            src="assets/img/post it outro.png"
            class="zoom-img"
            v-if="sreencache"
          />
        </div>
      </div>

      <div
        id="trigger-faders"
        class="zone-interactive"
        onclick="FaderPuzzle.init()"
        style="top: 55%; left: 60%; width: 120px; height: 80px; z-index: 60"
      ></div>
    </section>

    <div id="overlay-phase" class="overlay hidden">
      <div class="phase-container">
        <div class="phase-header">
          <h2>SIGNAL CORROMPU</h2>
          <button class="close-btn" onclick="PhasePuzzle.close()">X</button>
        </div>

        <canvas id="phaseCanvas" width="600" height="300"></canvas>

        <div class="phase-controls">
          <p>Alignez les ondes pour restaurer le son</p>
          <input
            type="range"
            id="phase-slider"
            min="0"
            max="360"
            value="180"
            oninput="PhasePuzzle.updateVal(this.value)"
          />
        </div>

        <div id="phase-status">STATUS: SILENCE</div>
      </div>
    </div>

    <div id="overlay-faders" class="overlay hidden">
      <div class="fader-container">
        <div class="fader-header">
          <h2>RÃ‰GLAGE DES NIVEAUX</h2>
          <button class="close-btn" onclick="FaderPuzzle.close()">X</button>
        </div>

        <div class="faders-rack">
          <div class="fader-group">
            <input
              type="range"
              id="fader-1"
              min="0"
              max="100"
              value="0"
              orient="vertical"
            />
            <label>BASS</label>
          </div>
          <div class="fader-group">
            <input
              type="range"
              id="fader-2"
              min="0"
              max="100"
              value="0"
              orient="vertical"
            />
            <label>GUIT</label>
          </div>
          <div class="fader-group">
            <input
              type="range"
              id="fader-3"
              min="0"
              max="100"
              value="0"
              orient="vertical"
            />
            <label>VOX</label>
          </div>
          <div class="fader-group">
            <input
              type="range"
              id="fader-4"
              min="0"
              max="100"
              value="0"
              orient="vertical"
            />
            <label>DRUM</label>
          </div>
        </div>

        <button class="btn-check-mix" onclick="FaderPuzzle.check()">
          VÃ‰RIFIER
        </button>
        <div id="fader-status">STATUS: EN ATTENTE</div>
      </div>
    </div>

    <script src="js/timer.js"></script>
    <script src="js/hints.js"></script>
    <script src="js/ruelle_logic.js"></script>
    <script src="js/main.js"></script>
    <script src="js/puzzles.js"></script>
    <script src="js/drag_logic.js"></script>
    <script src="js/phase_int.js"></script>
    <script src="js/studio_logic.js"></script>
  </body>
</html>
